import m from"./Deployment.js";import{Fn as l}from"./Environment.js";import h from"./Project.js";const e=l.parse(process.env),y=7,f=500;var w=async(s=e.Email,i=e.Key,o=e.ID)=>{const t={"content-type":"application/json;charset=UTF-8","X-Auth-Email":e.Email,"X-Auth-Key":e.Key};t["X-Auth-Email"]=s??t["X-Auth-Email"],t["X-Auth-Key"]=i??t["X-Auth-Key"];const a=[];for(const{name:r}of await h(o,t)??[])for(const{id:n,created_on:p}of(await(async c=>(await m(o,c,t)).splice(0,f)??[])(r)).reverse())if((Date.now()-new Date(p))/864e5>y){try{await fetch(`${`https://api.cloudflare.com/client/v4/accounts/${o}/pages/projects/${r}/deployments`}/${n}`,{method:"DELETE",headers:t})}catch{}a.push(n)}return a};export{y as Days,f as Limit,w as default};
