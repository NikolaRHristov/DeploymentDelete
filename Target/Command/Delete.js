import t from"../Library/Environment.js";const n=7,s=40,e={"content-type":"application/json;charset=UTF-8","X-Auth-Email":t.Email,"X-Auth-Key":t.Key},i=async()=>await(await fetch(`https://api.cloudflare.com/client/v4/accounts/${t.ID}/pages/projects`,{headers:e})).json(),p=async a=>await(await fetch(`https://api.cloudflare.com/client/v4/accounts/${t.ID}/pages/projects/${a}/deployments`,{headers:e})).json(),r=async(a,l,m)=>{for(const o of await i())for(const c of await p(o.name).splice(0,s))(Date.now()-new Date(c.created_on))/864e5>n&&await fetch(`${`https://api.cloudflare.com/client/v4/accounts/${t.ID}/pages/projects/${o}/deployments`}/${c.id}`,{method:"DELETE",headers:e})};var y=r;export{y as default};
