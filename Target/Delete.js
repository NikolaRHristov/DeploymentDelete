import m from"./Library/Deployment.js";import{Function as l}from"./Library/Environment.js";import h from"./Library/Project.js";const e=l.parse(process.env),u=7,y=500;var w=async(s=e.Email,i=e.Key,o=e.ID)=>{const t={"content-type":"application/json;charset=UTF-8","X-Auth-Email":e.Email,"X-Auth-Key":e.Key};t["X-Auth-Email"]=s??t["X-Auth-Email"],t["X-Auth-Key"]=i??t["X-Auth-Key"];const n=[];for(const{name:r}of await h(o,t)??[])for(const{id:c,created_on:p}of(await(async a=>(await m(o,a,t)).splice(0,y)??[])(r)).reverse())if((Date.now()-new Date(p))/864e5>u){try{await fetch(`${`https://api.cloudflare.com/client/v4/accounts/${o}/pages/projects/${r}/deployments`}/${c}`,{method:"DELETE",headers:t})}catch(a){console.log(a)}n.push(c)}return n};export{u as Days,y as Limit,w as default};
